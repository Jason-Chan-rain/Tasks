Task4 作业分工
---

##成员 

[易成][1]
[陈建][2]
[易铭][3]（组长)

##概要
- [行号](#行号)
- [高亮](#高亮)
- [字数统计](#字数统计)
- [菜单和快捷键](#菜单和快捷键)
- [查找和替换](#查找和替换)
- [字体和颜色](#字体和颜色)
- [终端](#终端)

##实现
###行号
行号修复部分由[易成][1]和[易铭][3]分别完成。经对比二者的实现方式，采用了[易铭][3]的方案。

行号异常完全解决，可以在维护展示或运行程序中随意尝试验证效果。
####主要问题
行号部分的主要问题在于
- 行号字体大小与编辑区失配
- 增加行和删除行行号显示异常
- 使用键盘操作时滚动页面，行号与编辑区不能匹配位置
- 使用快捷键操作时不能正确刷新
####实现
行号字体大小与编辑区失配主要在于没有将字体大小参数作为参数输入到行号部分，将其作为参数输入后，问题得到解决。

增加行和删除行号会显示异常主要在于旧版本中在按键按下后就解析行号，在按键释放后字符仍有输入。在将响应事件\<KeyPress>改为\<KeyRelease-Return>和\<KeyRelease-BackSpace>这一点在[易铭][3]的方案中有所体现。

键盘操作时，在行号区更新显示时使用see方法来和编辑区滚动位置相匹配。



###高亮
高亮部分由[易铭][3]独立完成。

高亮异常完全解决，可以在维护展示或运行程序中随意尝试验证效果。
####主要问题
高亮部分的主要问题在于
- 需要在关键字后输入空格才能显示
- 包含关键字的关键词也会被部分标记
- 在高亮标记后，在关键字中间修改后，不能正确失配
####实现
旧版本中采用关键字加非字母下划线和短横线作为匹配关键字，这一方式已被替代为使用原关键字绝对匹配加关键字符数来双重验证匹配。同时我们改变了高亮标记流程，先检查已经添加的tag有无更改，再进行新的tag标记。

###字数统计
字数统计部分由[易成][1]独立完成，实现了实时字数统计。
####实现
先将编辑区的所有文字按行数进行分割，再对每一行文字分别进行统计，用一个变量count_number保存此值并实时反馈到Text文本区中。

###菜单和快捷键
菜单和快捷键的添加和修复由易铭完成，解决了一些零散和细小的问题。
####主要问题
- 一些快捷键，如Ctrl + V，Ctrl + Z使用后没有相应更新高亮和行号
- 一些快捷键，如Ctrl + Z在菜单栏中（包括右键菜单）没有体现
####实现
在菜单栏和右键菜单中加入了撤销和恢复功能。

在旧版本中，文本编辑区的多个快捷键不能调用高亮和行号更新方法。在采用传递对象实例方法的方式后，使得在text_area对象中可以由快捷键方法主动强制更新高亮和行号。

###查找和替换
查找和替换部分由[易成][1]独立完成，实现了准确的查找和替换。

###字体和颜色
字体和颜色部分由[陈建][2]独立完成, 补全了原本缺失的部分。
####主要问题
字体和颜色部分的主要问题在于
- 界面缺失
- 颜色设置无效
####实现
引入字体模块
将列表注入下拉框
保存：修改yaml文件后，调用加载yaml更新的函数，然后实现设置
###终端
终端部分由[易铭][3]独立完成，能够执行非交互式cmd命令。
####主要遇到的问题
- 在不作限定的情况下，命令提示符和终端输出能被任意编辑
- 暂不支持路径变更命令
####实现
在终端功能中，限定了在text组件中的任意编辑，在文件提示符的末尾设定了一个mark，对于在mark之前的插入，删除，选定删除都是不被允许的。其中在mark之前插入，将默认插入字符在提示符后的第一个位置，在mark处的任意删除将被打断。

可以输入任何cmd命令，但暂不支持交互式命令。

可以尝试在根目录中添加测试用脚本并用"Python"命令执行。

##贡献
###易成
- 报告第一部分（全部）
- 报告第二部分
- 报告第三部分（主要）
- 行号
- 字数统计
- 查找和替换
- 主程序
###陈建
- 报告第二部分
- 报告第三部分
- 字体和颜色
###易铭
- 报告第三部分
- Readme文件
- 行号
- 高亮
- 菜单和快捷键
- 终端
- 主程序
- 整合、打包和制作Gif

[1]: 易成
[2]: 陈建
[3]: 易铭